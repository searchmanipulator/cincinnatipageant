function dhtmlXColorPickerInput(A){if(typeof (A)!="object"){A=document.getElementById(A)}var C=A;var E=C.getAttribute("colorbox");var D=C.getAttribute("customcolors");var J=C.getAttribute("selectonclick");var I=C.getAttribute("fullview");var L=C.getAttribute("selectedcolor");var F=C;if(E){var K=document.createElement("DIV");K.style.width=C.offsetWidth+"px";K.style.height=C.offsetHeight+"px";C.style.width=C.offsetWidth-C.offsetHeight-2;C.parentNode.insertBefore(K,C);K.style.position="relative";F=document.createElement("DIV");K.appendChild(F);K.appendChild(C);F.className="cs_colorBox";C.className+=" cs_colorInput";F.style.width=F.style.height=(C.offsetHeight-(document.all?0:2))+"px";C.style.left=C.offsetHeight+2+"px"}var H=new dhtmlXColorPicker(null,J,D,true,I);if(L){H.setColor(L)}H.linkToObjects=[F,C,C];return H}function dhtmlXColorPicker(A,K,J,F,H){if(document.all){try{document.execCommand("BackgroundImageCache",false,true)}catch(I){}}this._cc=J;if(!A){A=document.createElement("DIV");A.style.position="absolute";document.body.appendChild(A);A._dhx_remove=true}if(typeof (A)!="object"){this.container=document.getElementById(A)}else{this.container=A}dhtmlxEventable(this);this.skinName=dhtmlx.skin||"";this.ready=false;this.hideOnInit=F||false;this.linkToObjects=[];this.imgURL=dhtmlx.image_path||window.dhx_globalImgPath||"";this.hideSelfOnSelect=true;this.hex="000000";this.h=100;this.s=0.9;this.v=0.1;this.r=0;this.g=0;this.b=0;this.old_hue=0;this.old_sat=0;this.fullview=H||false;this.customColorsCount=(!this.fullview?10:8);this.language=null;this.elements=new Array();this.customColors=new Array();this.restoreFrom=null;if(!this.fullview){this.colorSelectH=119;this.colorSelectW=209}else{this.colorSelectH=255;this.colorSelectW=255}this.isClickOnly=K||false;if(window.cs_dechex==null){var D=new Array(0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f");window.cs_dechex=new Array();for(var E=0;E<256;E++){var C=D[E>>4].toString()+D[E&15].toString();if(C.length<2){C="0"+C}window.cs_dechex[E]=C}}defLeng={langname:"en-us",labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Add to Custom Colors",btnSelect:"Select",btnCancel:"Cancel"};if(window.dhtmlxColorPickerObjects){window.dhtmlxColorPickerObjects[window.dhtmlxColorPickerObjects.length]=this}else{window.dhtmlxColorPickerObjects=[this]}if(!window.dhtmlxColorPickerLangModules){window.dhtmlxColorPickerLangModules={}}window.dhtmlxColorPickerLangModules["en-us"]=defLeng;return this}dhtmlXColorPicker.prototype.generate=function(){X=(document.compatMode!="BackCompat"?"X":"");if(!this.fullview){var A="<div class='dhtmlxcolorpicker"+(this.skinName!=""?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>";if((document.all)&&((this.container.style.position=="absolute"))){A+="<iframe src='"+(this.imgURL||"")+"blank.html' frameBorder='0' style='position:absolute; top:0px; left:0px; width:252px;  height:"+(this._cc?300:244)+"px; z-index:-1;'></iframe>"}A+="<table cellpadding='0' cellspacing='0'>";A+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_top.gif);'></td></tr>";A+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:"+(document.all?247:243)+"px;height:"+(this._cc?281:240)+"px;'>";A+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>";A+="<tr>";A+="<td><div class='cs_SelectorDiv_Mini' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>";A+="<td><div class='cs_LumSelect_Mini' csid='cs_LumSelect'><div csid='cs_LumSelectArrow'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>";A+="</tr>";A+="<tr><td style='padding-top:10px;' colspan='2'>";A+="<table class='cs_ColorArea_Mini' cellpadding='0px' cellspacing='0px'>";A+="<tr><td rowspan='2' valign='top' style='text-align:left;'><div class='cs_EndColor_Mini' csid='cs_EndColor' ></div></td><td>"+this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input_Mini"+X+"' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputRed' value='' /></td></tr>";A+="<tr><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputGreen' value='' /></td></tr>";A+="<tr><td style='vertical-align:top;width:80px;text-align:left;'># <input csid='cs_Hex' class='cs_Hex_Mini"+X+"'></td><td>"+this.language.labelLum+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputBlue' value='' /></td></tr>";if(this._cc){A+="<tr><td colspan='6'><input tabindex='7' class='cs_CustomColorAdd_Mini' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>";A+="<tr><td colspan='6'><div class='cs_CustomColors_Mini' csid='cs_CustomColors'></div></td></tr>"}A+="</table>";A+="</td></tr>";A+="</table>";A+="<table class='cs_ButtonsPanel' cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='width:100%;'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>";A+="</td><td style='width:2px;background:url("+(this.imgURL||"")+"right.gif);'></td></tr>";A+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_bottom.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"bottom.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_bottom.gif);'></td></tr>";A+="</table>";A+="</div>"}else{var A="<div class='dhtmlxcolorpicker"+(this.skinName!=""?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>";if((document.all)&&((this.container.style.position=="absolute"))){A+="<iframe src='"+(this.imgURL||"")+"blank.html' style='position:absolute; top:0px; left:0px; width:320px;  height:"+(this._cc?454:407)+"px; z-index:-1;'></iframe>"}A+="<table cellpadding='0' cellspacing='0'>";A+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_top.gif);'></td></tr>";A+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:316px;height:"+(this._cc?446:392)+"px;background:#E6E5E5;'>";A+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>";A+="<tr>";A+="<td><div class='cs_SelectorDiv' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>";A+="<td><div class='cs_LumSelect' csid='cs_LumSelect'><div class='cs_LumSelectArrow' csid='cs_LumSelectArrow' style='left:16px;top:124px;'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>";A+="</tr>";A+="<tr><td style='padding-top:10px;' colspan='2'>";A+="<table class='cs_ColorArea' cellpadding='0px' cellspacing='0px'>";A+="<tr><td rowspan='3'><div class='cs_EndColor' csid='cs_EndColor'></div></td><td valign='top' style='text-align:center;width:80px;'># <input csid='cs_Hex' class='cs_Hex'></td><td>"+this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputRed' value='' /></td></tr>";A+="<tr><td></td><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputGreen' value='' /></td></tr>";A+="<tr><td></td><td>"+this.language.labelLum+":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputBlue' value='' /></td></tr>";if(this._cc){A+="<tr><td>";A+="<div class='cs_CustomColors' csid='cs_CustomColors'></div>";A+="</td><td></td><td colspan='4' valign='top'><input tabindex='7' class='cs_CustomColorAdd' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>"}A+="</table>";A+="</td></tr>";A+="</table>";A+="<table cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='height:49px;background:url("+(this.imgURL||"")+"buttons_panel.gif);'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>";A+="</td><td style='width:2px;background:url("+(this.imgURL||"")+"right.gif);'></td></tr>";A+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_bottom.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"bottom.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_bottom.gif);'></td></tr>";A+="</table>";A+="</div>"}if(!this.fullview){this.container.style.width="252px"}else{this.container.style.width="320px"}this.container.innerHTML=A;this._initCsIdElement();if(!this.fullview){this.elements.cs_SelectorDiv.style.backgroundImage="url("+(this.imgURL||"")+"colormini.png)"}else{this.elements.cs_SelectorDiv.style.backgroundImage="url("+(this.imgURL||"")+"color.png)"}this.elements.cs_SelectorDiv.z=this;this.elements.cs_LumSelect.z=this;this.elements.cs_LumSelectArrow.z=this;this.z=this;this._drawLum();this._colorizeLum(this.old_hue,this.old_sat);this._initEvents();if(this._cc){this._initCustomColors()}this.ColorNum=0;this.restoreFromHSV();this._drawValues()};dhtmlXColorPicker.prototype._initCsIdElement=function(F){if(F==null){F=this.container}var E=F.childNodes;var C=E.length;for(var D=0;D<C;D++){if(E[D].nodeType==1){var A=E[D].getAttribute("csid");if(A!==null){this.elements[A]=E[D]}if(E[D].childNodes.length>0){this._initCsIdElement(E[D])}}}};dhtmlXColorPicker.prototype._initEvents=function(){this.elements.cs_SelectorDiv.onmousedown=this._startMoveColor;this.elements.cs_SelectorDiv.ondblclick=this.clickOk;this.elements.cs_LumSelect.onmousedown=this._startMoveLum;this.elements.cs_LumSelect.ondblclick=this.clickOk;this.elements.cs_LumSelectArrow.onmousedown=this._startMoveLum;if(this._cc){this.elements.cs_CustomColorAdd.z=this;this.elements.cs_CustomColorAdd.onclick=this.addCustomColor;this.elements.cs_CustomColorAdd.onmouseover=this.hoverButton;this.elements.cs_CustomColorAdd.onmouseout=this.normalButton}var A=new Array("cs_InputHue","cs_InputRed","cs_InputSat","cs_InputGreen","cs_InputLum","cs_InputBlue");for(var C=0;C<A.length;C++){this.elements[A[C]].z=this;this.elements[A[C]].onchange=C%2?this._changeValueRGB:this._changeValueHSV}this.elements.cs_Hex.z=this;this.elements.cs_Hex.onchange=this._changeValueHEX;this.elements.cs_ButtonOk.z=this;this.elements.cs_ButtonOk.onclick=this.clickOk;this.elements.cs_ButtonOk.onmouseover=this.hoverButton;this.elements.cs_ButtonOk.onmouseout=this.normalButton;this.elements.cs_ButtonCancel.z=this;this.elements.cs_ButtonCancel.onclick=this.clickCancel;this.elements.cs_ButtonCancel.onmouseover=this.hoverButton;this.elements.cs_ButtonCancel.onmouseout=this.normalButton};dhtmlXColorPicker.prototype.resetHandlers=function(A){};dhtmlXColorPicker.prototype.clickOk=function(C){var D=this.z;var A=D.getSelectedColor();D.callEvent("onSelect",[A[0]]);if(D.hideSelfOnSelect){D.hide()}};dhtmlXColorPicker.prototype.clickCancel=function(A){var C=this.z;C.callEvent("onCancel",[]);if(this.z.hideSelfOnSelect){this.z.hide()}};dhtmlXColorPicker.prototype._setCrossPos=function(E){var I=this.z;var F=I._getOffset(this.elements.cs_SelectorDiv);var J=E.clientY-F[0];if(J<0){J=0}else{if(J>this.colorSelectH){J=this.colorSelectH}}var A=E.clientX-F[1];if(A<0){A=0}else{if(A>this.colorSelectW){A=this.colorSelectW}}I.elements.cs_SelectorVer.style.left=A+"px";I.elements.cs_SelectorHor.style.top=J+"px";var D=A==this.colorSelectW?0:360*A/this.colorSelectW;var C=1-J/this.colorSelectH;return[D,C]};dhtmlXColorPicker.prototype._getScrollers=function(){return([(document.body.scrollLeft||document.documentElement.scrollLeft),(document.body.scrollTop||document.documentElement.scrollTop)])};dhtmlXColorPicker.prototype._setLumPos=function(C){var E=this.z;var D=E._getOffset(E.elements.cs_LumSelect);var F=C.clientY-D[0]-4;if(F<-3){F=-3}if(F>this.colorSelectH-4){F=this.colorSelectH-4}E.elements.cs_LumSelectArrow.style.top=F+"px";E.elements.cs_LumSelectLine.style.top=F+4+"px";var A=(F+3)/this.colorSelectH;return A};dhtmlXColorPicker.prototype._startMoveColor=function(E){var F=this.z;if(E==null){E=event}F.elements.cs_SelectorDiv.onmousedown=null;F.b_move=document.body.onmousemove;F.b_up=document.body.onmouseup;var A=F;document.body.onmousemove=function(H){if(H==null){H=event}A._mouseMoveColor(H)};document.body.onmouseup=function(H){if(H==null){H=event}A._stopMoveColor(H);A=null};F.elements.cs_SelectorDiv.onmousemove=F._mouseMoveColor;F.elements.cs_SelectorDiv.onmouseup=F._stopMoveColor;var D=F._setCrossPos(E);F.h=D[0];F.s=D[1];var C=F._calculateColor();F._colorizeLum(C[0],C[1])};dhtmlXColorPicker.prototype._mouseMoveColor=function(D){var E=this.z;if(D==null){D=event}var C=E._setCrossPos(D);if(E.isClickOnly){return }E.h=C[0];E.s=C[1];var A=E._calculateColor();E._colorizeLum(A[0],A[1])};dhtmlXColorPicker.prototype._stopMoveColor=function(D){var E=this.z;if(D==null){D=event}E.elements.cs_SelectorDiv.onmousedown=E._startMoveColor;E.elements.cs_SelectorDiv.onmousemove=null;E.elements.cs_SelectorDiv.onmouseup=null;document.body.onmousemove=E.b_move;document.body.onmouseup=E.b_up;var C=E._setCrossPos(D);E.h=C[0];E.s=C[1];var A=E._calculateColor();E._colorizeLum(A[0],A[1])};dhtmlXColorPicker.prototype._startMoveLum=function(C){var D=this.z;if(C==null){C=event}D.elements.cs_LumSelect.onmousedown=null;D.elements.cs_LumSelectArrow.onmousedown=null;D.elements.cs_LumSelect.onmousemove=D._mouseMoveLum;D.elements.cs_LumSelect.onmouseup=D._stopMoveLum;D.b_move=document.body.onmousemove;D.b_up=document.body.onmouseup;D.b_selstart=document.body.onselectstart;var A=D;document.body.onmousemove=function(E){if(E==null){E=event}A._mouseMoveLum(E)};document.body.onmouseup=function(E){if(E==null){E=event}A._stopMoveLum(E);A=null};document.body.onselectstart=function(){return false};D.v=D._setLumPos(C);D._calculateColor()};dhtmlXColorPicker.prototype._mouseMoveLum=function(A){var C=this.z;if(A==null){A=event}C.v=C._setLumPos(A);if(C.isClickOnly){return }C._calculateColor()};dhtmlXColorPicker.prototype._stopMoveLum=function(A){var C=this.z;if(A==null){A=event}C.elements.cs_LumSelect.onmousedown=C._startMoveLum;C.elements.cs_LumSelectArrow.onmousedown=C._startMoveLum;C.elements.cs_LumSelect.onmousemove=null;C.elements.cs_LumSelect.onmouseup=null;C.v=C._setLumPos(A);C._calculateColor();document.body.onmousemove=C.b_move;document.body.onmouseup=C.b_up;document.body.onselectstart=C.b_selstart};dhtmlXColorPicker.prototype._getOffset=function(C){var E=this._getOffsetTop(C);var D=this._getOffsetLeft(C);var A=this._getScrollers();return[E-A[1],D-A[0]]};dhtmlXColorPicker.prototype._getOffsetTop=function(A){var C=0;if(A.offsetParent){C+=A.offsetTop+this._getOffsetTop(A.offsetParent)}return C};dhtmlXColorPicker.prototype._getOffsetLeft=function(A){var C=0;if(A.offsetParent){C+=A.offsetLeft+this._getOffsetLeft(A.offsetParent)}return C};dhtmlXColorPicker.prototype._calculateColor=function(){if(this.restoreFrom=="RGB"){var A=[this.r,this.g,this.b]}else{var A=this._hsv2rgb(this.h,this.s,1-this.v);this.r=A[0];this.g=A[1];this.b=A[2]}this.hex=this._getColorHEX(A);this.elements.cs_EndColor.style.backgroundColor="#"+this.hex;this._drawValues();this.restoreFrom=null;return[this.h,this.s,1-this.v]};dhtmlXColorPicker.prototype._drawValues=function(){this.elements.cs_Hex.value=this.hex;this.elements.cs_InputHue.value=Math.floor(this.h);this.elements.cs_InputSat.value=Math.floor(this.s*100);this.elements.cs_InputLum.value=Math.floor((1-this.v)*100);this.elements.cs_InputRed.value=Math.floor(this.r);this.elements.cs_InputGreen.value=Math.floor(this.g);this.elements.cs_InputBlue.value=Math.floor(this.b)};dhtmlXColorPicker.prototype.saveColor=function(D,C){var A=new Date();var F=A.valueOf()+2678400000;A=new Date(F);var E="color_"+C+"="+D+"; expires="+A.toGMTString();document.cookie=E};dhtmlXColorPicker.prototype.restoreColor=function(E){var D=false;var C="color_"+E;if(document.cookie.length>0){var H=document.cookie.indexOf(C+"=");if(H!=-1){var F=document.cookie.indexOf(";",H);if(F==-1){F=document.cookie.length}var A=document.cookie.indexOf("=",H)+1;var D=document.cookie.substr(A,F-A)}}return D};dhtmlXColorPicker.prototype._hsv2rgb=function(E,D,C){Hi=Math.floor((E/60))%6;f=E/60-Hi;p=C*(1-D);q=C*(1-f*D);t=C*(1-(1-f)*D);var H=0;var F=0;var A=0;switch(Hi){case 0:H=C;F=t;A=p;break;case 1:H=q;F=C;A=p;break;case 2:H=p;F=C;A=t;break;case 3:H=p;F=q;A=C;break;case 4:H=t;F=p;A=C;break;case 5:H=C;F=p;A=q;break}H=Math.floor(H*255);F=Math.floor(F*255);A=Math.floor(A*255);return[H,F,A]};dhtmlXColorPicker.prototype._rgb2hsv=function(J,I,A){R=J/255;G=I/255;B=A/255;var K=Math.max(R,G,B);var D=Math.min(R,G,B);var C=K;var F=K==0?0:(1-D/K);var E=0;if(K==D){E=0}else{if(K==R&&G>=B){E=60*(G-B)/(K-D)+0}else{if(K==R&&G<B){E=60*(G-B)/(K-D)+360}else{if(K==G){E=60*(B-R)/(K-D)+120}else{if(K==B){E=60*(R-G)/(K-D)+240}}}}}return[E,F,C]};dhtmlXColorPicker.prototype._drawLum=function(){var A=this.colorSelectH;var D=(!this.fullview?30:64);var C=(!this.fullview?8:4);for(var E=0;E<D;E++){var F=document.createElement("div");var H=this._dec2hex(A);F.style.backgroundColor="#"+H+H+H;F.className="cs_LumElement";A-=C;this.elements.cs_LumSelect.appendChild(F)}};dhtmlXColorPicker.prototype._colorizeLum=function(F,E){this.old_hue=F;this.old_sat=E;var A=255;var I=(!this.fullview?8:4);var C=this.elements.cs_LumSelect.childNodes.length;for(var J=2;J<C;J++){var D=(A>255)?1:(A/255);var H=this._hsv2rgb(F,E,D);var H="#"+this._getColorHEX(H);this.elements.cs_LumSelect.childNodes[J].style.backgroundColor=H;A-=I}this.callEvent("onChange",[this.getSelectedColor()])};dhtmlXColorPicker.prototype._dec2hex=function(A){return window.cs_dechex[A]||"00"};dhtmlXColorPicker.prototype._hex2dec=function(A){return parseInt(A,16)};dhtmlXColorPicker.prototype._initCustomColors=function(){var A=this.elements.cs_CustomColors;for(var E=0;E<this.customColorsCount;E++){var F=document.createElement("div");F.className=(this.fullview?"cs_CustomColor":"cs_CustomColor_Mini");F.color_num=E;if(document.all){if(navigator.appName=="Opera"){if(!this.fullview){F.style.width="18px";F.style.height="18px"}else{F.style.width="14px";F.style.height="14px"}}else{if(!this.fullview){if(document.compatMode!="BackCompat"){F.style.width="18px"}else{F.style.width="20px"}F.style.height="20px"}else{F.style.width="16px";F.style.height="16px"}}}F.z=this;F.onclick=this._selectCustomColor;F.ondblclick=this.clickOk;var C=this.restoreColor(E)||"0,0,0";F.color=C;var D=C.split(",");F.style.backgroundColor="#"+this._getColorHEX(D);this.customColors.push(F);A.appendChild(F)}};dhtmlXColorPicker.prototype._reinitCustomColors=function(){var A=this.elements.cs_CustomColors;for(var E=0;E<this.customColorsCount;E++){var F=this.customColors[E];var C=this.restoreColor(E)||"0,0,0";F.color=C;var D=C.split(",");F.style.backgroundColor="#"+this._getColorHEX(D);this.customColors[E]=F}};dhtmlXColorPicker.prototype._getColorHEX=function(C){var E=this._dec2hex(C[0]);var D=this._dec2hex(C[1]);var A=this._dec2hex(C[2]);return(E+D+A)};dhtmlXColorPicker.prototype._selectCustomColor=function(D){if(D==null){D=event}var E=this.z;if(!this.selected){for(var C=0;C<E.customColors.length;C++){E.customColors[C].style.border="1px solid gray"}this.style.border="1px dashed black";this.selected=true;if(E.selectedColor!=null){E.customColors[E.selectedColor].style.border="1px solid gray";E.customColors[E.selectedColor].selected=false}}E.selectedColor=this.color_num;E.ColorNum=this.color_num;var A=this.color.split(",");E.r=A[0];E.g=A[1];E.b=A[2];E.restoreFromRGB()};dhtmlXColorPicker.prototype.addCustomColor=function(){var D=this.z;if(D.selectedColor!=null){var C=D.customColors[D.selectedColor];var E=D.selectedColor;C.style.border="1px solid gray";D.selectedColor=null}else{var C=D.customColors[D.ColorNum];var E=D.ColorNum;C.style.border="1px solid gray"}var A=D.r+","+D.g+","+D.b;D.saveColor(A,E);C.color=A;D.ColorNum=D.ColorNum==9?0:D.ColorNum+1;D.customColors[D.ColorNum].style.border="1px dashed red";C.style.backgroundColor=D.elements.cs_EndColor.style.backgroundColor};dhtmlXColorPicker.prototype.restoreFromRGB=function(){this.restoreFrom="RGB";var A=this._rgb2hsv(this.r,this.g,this.b);this.h=A[0];this.s=A[1];this.v=1-A[2];if(this.ready){this.redraw()}};dhtmlXColorPicker.prototype.restoreFromHSV=function(){this.restoreFrom="HSV";var A=this._hsv2rgb(this.h,this.s,this.v);this.r=A[0];this.g=A[1];this.b=A[2];this.redraw()};dhtmlXColorPicker.prototype.restoreFromHEX=function(){this.r=this._hex2dec(this.hex.substr(0,2));this.g=this._hex2dec(this.hex.substr(2,2));this.b=this._hex2dec(this.hex.substr(4,2));this.restoreFromRGB()};dhtmlXColorPicker.prototype.redraw=function(){var A=this.colorSelectW*this.h/360;var E=(1-this.s)*this.colorSelectH;var D=(this.v)*this.colorSelectH;this.elements.cs_SelectorHor.style.top=E+"px";this.elements.cs_SelectorVer.style.left=A+"px";this.elements.cs_LumSelectArrow.style.top=D-3+"px";this.elements.cs_LumSelectLine.style.top=D+1+"px";var C=this._calculateColor();this._colorizeLum(C[0],C[1])};dhtmlXColorPicker.prototype._changeValueHSV=function(){var E=this.z;var D=parseInt(E.elements.cs_InputHue.value)||0;var C=parseInt(E.elements.cs_InputSat.value)||0;var A=parseInt(E.elements.cs_InputLum.value)||0;if(D<0||D>359){D=0}if(C<0||C>100){C=0}if(A<0||A>100){A=0}E.elements.cs_InputHue.value=D;E.elements.cs_InputSat.value=C;E.elements.cs_InputLum.value=A;E.h=D;E.s=C/100;E.v=1-A/100;E.restoreFromHSV()};dhtmlXColorPicker.prototype._changeValueRGB=function(){var D=this.z;var C=parseInt(D.elements.cs_InputRed.value)||0;var A=parseInt(D.elements.cs_InputGreen.value)||0;var E=parseInt(D.elements.cs_InputBlue.value)||0;if(C<0||C>255){C=0}if(A<0||A>255){A=0}if(E<0||E>255){E=0}D.elements.cs_InputRed.value=C;D.elements.cs_InputGreen.value=A;D.elements.cs_InputBlue.value=E;D.r=C;D.g=A;D.b=E;D.restoreFromRGB()};dhtmlXColorPicker.prototype._changeValueHEX=function(){var C=this.z;var A=(C.elements.cs_Hex.value)||0;A=A.replace(/[^a-fA-F0-9]/gi,"0");if(A.length>6){A=A.substr(0,6)}else{while(A.length<6){A+="0"}}C.elements.cs_Hex.value=A;C.hex=A;C.restoreFromHEX()};dhtmlXColorPicker.prototype.setCustomColors=function(A){A=A.split(",");for(var D=0;D<A.length;D++){var C=A[D];if(C.substr(0,1)=="#"){C=C.substr(1)}var F=this._hex2dec(C.substr(0,2));var E=this._hex2dec(C.substr(2,2));var H=this._hex2dec(C.substr(4,2));C=F+","+E+","+H;this.saveColor(C,D)}};dhtmlXColorPicker.prototype.setColor=function(A){if(typeof (A)!="string"){var D=A[0];var C=A[1];var F=A[2]}else{if(A.indexOf("rgb")!=-1){var E=A.substr(A.indexOf("(")+1,A.lastIndexOf(")")-A.indexOf("(")-1).split(",");var D=E[0];var C=E[1];var F=E[2]}else{if(A.substr(0,1)=="#"){A=A.substr(1)}var D=this._hex2dec(A.substr(0,2));var C=this._hex2dec(A.substr(2,2));var F=this._hex2dec(A.substr(4,2))}}D=parseInt(D)||0;C=parseInt(C)||0;F=parseInt(F)||0;if(D<0||D>255){D=0}if(C<0||C>255){C=0}if(F<0||F>255){F=0}this.r=D;this.g=C;this.b=F;this.restoreFromRGB()};dhtmlXColorPicker.prototype.close=function(){this.elements.cs_SelectorDiv.z=null;this.elements.cs_LumSelect.z=null;this.elements.cs_LumSelectArrow.z=null;this.elements.cs_ButtonOk.z=null;this.elements.cs_ButtonCancel.z=null;if(this.cc){this.elements.cs_CustomColorAdd.z=null}this.container.innerHTML="";if(this.container._dhx_remove){this.container.parentNode.removeChild(this.container)}};dhtmlXColorPicker.prototype.show=function(){this.callEvent("onShow",[]);if(this.container.innerHTML==""){return }this.elements.cs_Content.style.display="";this.elements.cs_InputHue.focus()};dhtmlXColorPicker.prototype.setPosition=function(A,C){this.container.style.position="absolute";this.container.style.top=(C>0?C:10)+"px";this.container.style.left=A+"px"};dhtmlXColorPicker.prototype.hide=function(){this.resetHandlers();if(this.elements.cs_Content){this.elements.cs_Content.style.display="none"}};dhtmlXColorPicker.prototype.setOnSelectHandler=function(A){this.attachEvent("onSelect",A)};dhtmlXColorPicker.prototype.setOnCancelHandler=function(A){this.attachEvent("onCancel",A)};dhtmlXColorPicker.prototype.getSelectedColor=function(){var D=new Array(this.r,this.g,this.b);var C=this._dec2hex(this.r)+this._dec2hex(this.g)+this._dec2hex(this.b);var A=new Array(this.h,this.s,this.v);return["#"+C,D,A]};dhtmlXColorPicker.prototype.linkTo=function(E,D,C){if(typeof (E)!="object"){E=document.getElementById(E)}if(typeof (D)!="object"){D=document.getElementById(D)}if(typeof (C)!="object"){C=document.getElementById(C)}this.linkToObjects=arguments;var A=this;D.onclick=function(){var I=A._getOffset(E);var H=A._getScrollers();var F=I[1]+H[0];var J=I[0]+H[1];A.setPosition(F+E.offsetWidth,J);A.isVisible()?A.hide():A.show()};this.setOnSelectHandler(function(F){E.style.backgroundColor=F;if(C){C.value=F}});this.close=this.hide;this.hide()};dhtmlXColorPicker.prototype.hideOnSelect=function(A){this.hideSelfOnSelect=A};dhtmlXColorPicker.prototype.setImagePath=function(A){this.imgURL=A};dhtmlXColorPicker.prototype.init=function(){if(!this.language){this.loadUserLanguage("en-us")}this.generate();this.ready=true;if(this._cc){this._reinitCustomColors()}if(this.linkToObjects.length>0){this.linkTo(this.linkToObjects[0],this.linkToObjects[1],this.linkToObjects[2])}if(!this.hideOnInit){this.show()}};dhtmlXColorPicker.prototype.loadUserLanguage=function(A){if(!window.dhtmlxColorPickerLangModules[A]){return }this.language=window.dhtmlxColorPickerLangModules[A];if(this.ready){this.generate();this.show()}};dhtmlXColorPicker.prototype.setSkin=function(A){this.skinName=A;if(this.elements.cs_Content){this.elements.cs_Content.className="dhtmlxcolorpicker"+(A?"_"+A:A)}};dhtmlXColorPicker.prototype.isVisible=function(){return !(this.elements.cs_Content.style.display=="none")};dhtmlXColorPicker.prototype.hoverButton=function(){this.className+="_Hover"};dhtmlXColorPicker.prototype.normalButton=function(){this.className=this.className.substr(0,this.className.length-6)};(function(){dhtmlx.extend_api("dhtmlXColorPicker",{_init:function(A){return[A.parent,A.click,A.colors,A.hide,A.full]},show:"showA",link:"linkTo",image_path:"setImagePath",color:"setColor"},{showA:function(){this.init();this.show()}})})();